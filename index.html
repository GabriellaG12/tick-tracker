<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tick Tracker</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

    <!-- App CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

<header class="topbar">
    <h1>UK Tick Tracker</h1>
</header>

<main class="layout">

    <!-- LEFT: MAP -->
    <div id="map"></div>

    <!-- RIGHT PANEL -->
    <div id="right-panel">

        <!-- FILTER CONTROLS -->
        <div id="filters" class="filters">
            <label>
                Date Range:
                <select id="filter-date">
                    <option value="">All</option>
                    <option value="1m">Last Month</option>
                    <option value="1y">Last Year</option>
                    <option value="2y">Last 2 Years</option>
                </select>
            </label>
            <label>
                Species:
                <select id="filter-species">
                    <option value="">All</option>
                </select>
            </label>
            <label>
                Severity:
                <select id="filter-severity">
                    <option value="">All</option>
                    <option value="low">Low (green)</option>
                    <option value="medium">Medium (orange)</option>
                    <option value="high">High (red)</option>
                </select>
            </label>
            <button id="apply-filters">Apply Filters</button>
        </div>

        <!-- RESULTS SECTION -->
        <div id="results">
            <h3>Results</h3>
            <div id="results-list"></div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="guide">Species Guide</button>
            <button class="tab" data-tab="prevention">Prevention Tips</button>
            <button class="tab" data-tab="report">Actions</button>
        </div>

        <!-- Tab Content -->
        <div id="guide" class="tab-pane active">
            <h3>Species Identification Guide</h3>
            <ul>
                <li><strong>Ixodes ricinus</strong> — Castor bean tick</li>
                <li><strong>Ixodes hexagonus</strong> — Hedgehog tick</li>
                <li><strong>Dermacentor reticulatus</strong> — Ornate dog tick</li>
            </ul>
        </div>

        <div id="prevention" class="tab-pane">
            <h3>Prevention Tips</h3>
            <ol>
                <li>Use approved tick preventatives for pets year-round.</li>
                <li>Check pets and people after walking in long grass.</li>
                <li>Keep grassy areas short.</li>
            </ol>
        </div>

        <!-- ACTIONS TAB -->
        <div id="report" class="tab-pane">

            <div style="margin-bottom: 15px;">
                <button onclick="window.location.href='report.html'" class="big-btn">
                    Report a Sighting
                </button>
            </div>

            <div class="quick-actions">

                <button id="open-directions">Get Directions</button>

                <button id="share-btn">Share</button>
            </div>
        </div>


    </div> <!-- END right panel -->
</main>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- App JS -->
<script src="js/cityCoordinates.js"></script>
<script src="js/api.js"></script>
<script src="js/ui.js"></script>
<script src="js/map.js"></script>

<script>

/* Share button to mail app */
document.getElementById("share-btn").addEventListener("click", () => {
    const subject = encodeURIComponent("Tick Sighting Information");
    const body = encodeURIComponent("Here is some tick information: ");

    window.location.href = `mailto:?subject=${subject}&body=${body}`;
});

/* Direction button */
function openMapsForCity(cityName) {
    if (!cityCoordinates[cityName]) {
        alert("No coordinates found for this city.");
        return;
    }
    const [lat, lon] = cityCoordinates[cityName];
    window.open(`https://www.google.com/maps?q=${lat},${lon}`, "_blank");
}

// From ACTIONS tab
document.getElementById("open-directions").addEventListener("click", () => {
    const city = window.lastSelectedCity;
    if (!city) return alert("Select a sighting first from the map or results.");
    openMapsForCity(city);
});


</script>

</body>
</html>
